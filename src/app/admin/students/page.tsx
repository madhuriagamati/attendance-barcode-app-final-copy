import { prisma } from '@/lib/db';
import Link from 'next/link';
export const dynamic='force-dynamic';
export default async function AdminStudentsPage(){const students=await prisma.student.findMany({orderBy:{name:'asc'}});return(<div className="space-y-4"><div className="flex items-center justify-between"><h1 className="text-xl font-semibold">Students</h1><div className="flex gap-2"><a className="btn" href="/students/new">Add Student</a><a className="btn" href="/students/import">Import CSV</a></div></div><div className="bg-slate-900/60 rounded-xl p-4 border border-slate-800"><table className="table"><thead><tr><th>Name</th><th>Barcode</th><th>Emails</th><th>Grade</th><th>Status</th><th>Actions</th></tr></thead><tbody>{students.map(s=>(<tr key={s.id} className="hover:bg-slate-800/40"><td>{s.name}</td><td><code>{s.barcode}</code></td><td className="text-xs">{[s.email1,s.email2].filter(Boolean).join(', ')}</td><td>{s.grade||''}</td><td>{s.active?<span className="badge">Active</span>:<span className="badge">Inactive</span>}</td><td className="space-x-3"><Link className="text-sky-400 hover:underline" href={`/admin/students/${s.id}`}>Edit</Link><Link className="text-sky-400 hover:underline" href={`/admin/students/${s.id}/barcode`}>Barcode</Link></td></tr>))}</tbody></table></div></div>);} 
