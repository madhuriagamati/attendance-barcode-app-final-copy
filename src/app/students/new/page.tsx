'use client';
import { useState } from 'react';
export default function NewStudent(){const[form,setForm]=useState({name:'',barcode:'',email1:'',email2:'',grade:''});const[msg,setMsg]=useState('');function update(k:string,v:string){setForm(prev=>({...prev,[k]:v}));}async function submit(e:React.FormEvent){e.preventDefault();setMsg('');const res=await fetch('/api/students',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(form)});if(res.ok){setMsg('Saved.');setForm({name:'',barcode:'',email1:'',email2:'',grade:''});}else{setMsg('Failed: '+await res.text());}}return(<div className="max-w-lg"><h1 className="text-xl font-semibold mb-3">Add Student</h1><form onSubmit={submit} className="card space-y-3"><input className="input" placeholder="Full name" value={form.name} onChange={e=>update('name',e.target.value)}/><input className="input" placeholder="Unique barcode (e.g., STU-0001)" value={form.barcode} onChange={e=>update('barcode',e.target.value)}/><input className="input" placeholder="Parent email #1" value={form.email1} onChange={e=>update('email1',e.target.value)}/><input className="input" placeholder="Parent email #2 (optional)" value={form.email2} onChange={e=>update('email2',e.target.value)}/><input className="input" placeholder="Grade (optional)" value={form.grade} onChange={e=>update('grade',e.target.value)}/><button className="btn">Save</button>{msg&&<div className="text-sm text-slate-300">{msg}</div>}</form></div>);} 
